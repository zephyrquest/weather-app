<?xml version="1.0" encoding="utf-8"?>

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WeatherApp.Views.Pages.CityForecastPage"
             BackgroundColor="#87CEEB">
       
       <ContentPage.Content>
              <CarouselView ItemsSource="{Binding DailyForecasts}">
                     <CarouselView.ItemsLayout>
                            <LinearItemsLayout Orientation="Horizontal" ItemSpacing="30" />
                     </CarouselView.ItemsLayout>
                     <CarouselView.ItemTemplate>
                            <DataTemplate>
                                   <VerticalStackLayout VerticalOptions="Center" 
                                                        HorizontalOptions="Fill"
                                                        Spacing="15"
                                                        Padding="20">
                                          <Label Text="{Binding Date, StringFormat='{0:yyyy MM dd}'}"
                                                 FontSize="24"
                                                 HorizontalOptions="Center" />

                                          <CollectionView ItemsSource="{Binding Forecasts}"
                                                          ItemsLayout="VerticalList"
                                                          SelectionMode="None"
                                                          HorizontalOptions="FillAndExpand">
                                                 <CollectionView.ItemTemplate>
                                                        <DataTemplate>
                                                               <Border Padding="5" 
                                                                       Margin="5"
                                                                       BackgroundColor="White" 
                                                                       StrokeShape="RoundRectangle 20"
                                                                       HorizontalOptions="FillAndExpand">
                                                                      <Grid ColumnDefinitions="*,Auto" 
                                                                            HorizontalOptions="FillAndExpand">
                                                                             <StackLayout Grid.Column="0">
                                                                                    <Label Text="{Binding LocalTime, StringFormat='{0:hh:mm tt}'}" FontSize="16" />
                                                                                    <Label Text="{Binding Main}" />
                                                                                    <Label Text="{Binding Temperature, StringFormat='{0}Â°', TargetNullValue='No info available'}" />
                                                                             </StackLayout>

                                                                             <Image Grid.Column="1"
                                                                                    Source="{Binding Icon}" 
                                                                                    WidthRequest="80" HeightRequest="80"
                                                                                    VerticalOptions="Center"
                                                                                    HorizontalOptions="End" />
                                                                      </Grid>
                                                               </Border>
                                                        </DataTemplate>
                                                 </CollectionView.ItemTemplate>
                                          </CollectionView>
                                   </VerticalStackLayout>
                            </DataTemplate>
                     </CarouselView.ItemTemplate>
              </CarouselView>
       </ContentPage.Content>
</ContentPage>